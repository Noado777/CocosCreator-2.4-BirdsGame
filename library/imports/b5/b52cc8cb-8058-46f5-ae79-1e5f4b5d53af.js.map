{"version":3,"sources":["assets\\script\\BirdControl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BirdControl extends cc.Component {\r\n    // 血量\r\n    Hp:number = 1 ;\r\n    // 速度\r\n    @property\r\n    speed:number = 100 ;\r\n    // 目标点\r\n    targetPos:cc.Vec2 = null;\r\n\r\n    // targetX:number \r\n    // targetY:number\r\n\r\n    // 游戏结束回调\r\n    dieCallBack: Function ;\r\n\r\n    // 加分回调\r\n    addScoreCallBack: Function ;\r\n\r\n    start () {\r\n        this.fly();\r\n    }\r\n\r\n    fly(){\r\n        // 设置随机目标点\r\n        this.targetPos = cc.v2(Math.random()*300 -80 , 250);   // 这里和上面cc.Vec2不一样，这里写的是cc.v2 注意\r\n        // 小鸟翻转\r\n        if(this.targetPos.x > this.node.x){\r\n            this.node.scaleX = -1 ;\r\n        }\r\n        // 移动，这里老师用距离除以速度得出时间，而不是在update里调用dt\r\n        let action = cc.moveTo((this.targetPos.y-this.node.y)/this.speed ,this.targetPos);\r\n\r\n        let seq = cc.sequence(action,cc.callFunc(()=>{\r\n            // 游戏结束\r\n            this.dieCallBack();        \r\n        }))\r\n\r\n        this.node.runAction(seq)  // 括号内填的本来只有action,为了实现diecallBack回调，换成seq序列\r\n        // 动画\r\n        // 点击掉下\r\n        this.node.on(cc.Node.EventType.MOUSE_DOWN,(event)=>{\r\n            this.Hp -= 1 ;\r\n            console.log('血量'+this.Hp);\r\n            this.node.stopAllActions();\r\n            // 要小鸟换成掉下来的动画/图片\r\n            this.node.getComponent(cc.Animation).play('die');\r\n            // 停止飞翔动作\r\n            this.node.stopAllActions();\r\n            // 小鸟掉下来                \r\n            let fall:cc.Vec2 = cc.v2(this.node.x, 0);\r\n            let action_die = cc.moveTo(this.node.y/this.speed/2,fall)\r\n            this.node.runAction(cc.sequence(action_die,cc.callFunc(()=>{     //是cc.callFunc(()=>{})\r\n                // moveTo执行完，小鸟掉到草里，再执行下一个动作即：\r\n                // 销毁自身\r\n                this.destroy();\r\n            })));   \r\n            // runAction()括号内填的本来只有action_die,为了实现addScoreCallBack回调\r\n            // 换成seq序列,虽然看起来复杂，其实和上面那个是一样的\r\n            // 加分，回调到BirdManager\r\n            this.addScoreCallBack();\r\n        })   \r\n        // 飞出屏幕外，游戏结束，在BirdManager里写\r\n\r\n        // 看上面seq的回调  \r\n\r\n    }\r\n    update (dt) {\r\n\r\n        \r\n        \r\n\r\n    }\r\n}\r\n/*\r\n不这样写，用动画切换，2个动画，播放move换成播放die,die就是一帧的动画\r\n// 加载图集\r\ncc.loader.loadRes('birddie',cc.SpriteFrame,(err,pic)=>{\r\n    // 换图\r\n    this.node.getComponent(cc.Sprite).spriteFrame = pic ;\r\n}) \r\n// 要小鸟换成掉下来的动画/图片\r\nthis.node.getComponent(cc.Animation).play('die');\r\n*/"]}